/**
 * GuanPlus.Accounting.WebApi
 *
 * OpenAPI spec version: v1
 *
 *
 * NOTE: This class is auto generated by the swagger code generator program.
 * https://github.com/swagger-api/swagger-codegen.git
 * Do not edit the class manually.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var http_1 = require("@angular/http");
var core_1 = require("@angular/core");
var variables_1 = require("../variables");
require("rxjs/Rx");
/* tslint:disable:no-unused-variable member-ordering */
var AccountTransLineItemApi = (function () {
    function AccountTransLineItemApi(http, basePath) {
        this.http = http;
        this.basePath = 'http://guanplus-api-accounting-dev.cn-north-1.eb.amazonaws.com.cn';
        this.defaultHeaders = new http_1.Headers();
        if (basePath) {
            this.basePath = basePath;
        }
    }
    /**
     *
     *
     * @param bankaccountid
     * @param accountTransactionType
     * @param keyword
     * @param startDate
     * @param endDate
     * @param tagidIds
     * @param pageIndex
     * @param pageSize
     * @param carryForwardStatus
     */
    AccountTransLineItemApi.prototype.accountTransLineItemAccountContrastExport = function (bankaccountid, accountTransactionType, keyword, startDate, endDate, tagidIds, pageIndex, pageSize, carryForwardStatus, extraHttpRequestParams) {
        var path = this.basePath + '/api/v1/account_transaction_line_item/export';
        var queryParameters = new http_1.URLSearchParams();
        var headerParams = this.defaultHeaders;
        if (bankaccountid !== undefined) {
            queryParameters.set('bankaccountid', String(bankaccountid));
        }
        if (accountTransactionType !== undefined) {
            queryParameters.set('accountTransactionType', String(accountTransactionType));
        }
        if (keyword !== undefined) {
            queryParameters.set('keyword', String(keyword));
        }
        if (startDate !== undefined) {
            queryParameters.set('startDate', String(startDate));
        }
        if (endDate !== undefined) {
            queryParameters.set('endDate', String(endDate));
        }
        if (tagidIds !== undefined) {
            queryParameters.set('tagidIds', String(tagidIds));
        }
        if (pageIndex !== undefined) {
            queryParameters.set('pageIndex', String(pageIndex));
        }
        if (pageSize !== undefined) {
            queryParameters.set('pageSize', String(pageSize));
        }
        if (carryForwardStatus !== undefined) {
            queryParameters.set('carryForwardStatus', String(carryForwardStatus));
        }
        var requestOptions = {
            method: http_1.RequestMethod.Get,
            headers: headerParams,
            search: queryParameters
        };
        return this.http.request(path, requestOptions)
            .map(function (response) {
            if (response.status === 204) {
                return undefined;
            }
            else {
                return response.json();
            }
        });
    };
    /**
     * 根据id 删除交易明细记录
     *
     * @param accountTransId
     * @param id
     */
    AccountTransLineItemApi.prototype.accountTransLineItemDelete = function (accountTransId, id, extraHttpRequestParams) {
        var path = this.basePath + '/api/v1/account_transaction_line_item/${accountTransId}/${id}'
            .replace('${' + 'accountTransId' + '}', String(accountTransId))
            .replace('${' + 'id' + '}', String(id));
        var queryParameters = new http_1.URLSearchParams();
        var headerParams = this.defaultHeaders;
        // verify required parameter 'accountTransId' is not null or undefined
        if (accountTransId === null || accountTransId === undefined) {
            throw new Error('Required parameter accountTransId was null or undefined' +
                'when calling accountTransLineItemDelete.');
        }
        // verify required parameter 'id' is not null or undefined
        if (id === null || id === undefined) {
            throw new Error('Required parameter id was null or undefined' +
                'when calling accountTransLineItemDelete.');
        }
        var requestOptions = {
            method: http_1.RequestMethod.Delete,
            headers: headerParams,
            search: queryParameters
        };
        return this.http.request(path, requestOptions)
            .map(function (response) {
            if (response.status === 204) {
                return undefined;
            }
            else {
                return response.json();
            }
        });
    };
    /**
     * 分页获取交易记录
     *
     * @param bankaccountid 银行账户Id
     * @param accountTransactionType 交易类型：0、全部；1、收入；2、支出
     * @param keyword 关键字
     * @param startDate 开始时间
     * @param endDate 结束时间
     * @param tagIds
     * @param pageIndex 页数索引
     * @param pageSize 页数大小
     * @param carryForwardStatus 结转状态：0、全部或者空；1、未结转；2、已结转
     */
    AccountTransLineItemApi.prototype.accountTransLineItemSearch = function (bankaccountid, accountTransactionType, keyword, startDate, endDate, tagIds, pageIndex, pageSize, carryForwardStatus, extraHttpRequestParams) {
        var path = this.basePath + '/api/v1/account_transaction_line_item/search';
        var queryParameters = new http_1.URLSearchParams();
        var headerParams = this.defaultHeaders;
        if (bankaccountid !== undefined) {
            queryParameters.set('bankaccountid', String(bankaccountid));
        }
        if (accountTransactionType !== undefined) {
            queryParameters.set('accountTransactionType', String(accountTransactionType));
        }
        if (keyword !== undefined) {
            queryParameters.set('keyword', String(keyword));
        }
        if (startDate !== undefined) {
            queryParameters.set('startDate', String(startDate));
        }
        if (endDate !== undefined) {
            queryParameters.set('endDate', String(endDate));
        }
        if (tagIds !== undefined) {
            queryParameters.set('tagIds', String(tagIds));
        }
        if (pageIndex !== undefined) {
            queryParameters.set('pageIndex', String(pageIndex));
        }
        if (pageSize !== undefined) {
            queryParameters.set('pageSize', String(pageSize));
        }
        if (carryForwardStatus !== undefined) {
            queryParameters.set('carryForwardStatus', String(carryForwardStatus));
        }
        var requestOptions = {
            method: http_1.RequestMethod.Get,
            headers: headerParams,
            search: queryParameters
        };
        return this.http.request(path, requestOptions)
            .map(function (response) {
            if (response.status === 204) {
                return undefined;
            }
            else {
                return response.json();
            }
        });
    };
    return AccountTransLineItemApi;
}());
AccountTransLineItemApi = __decorate([
    core_1.Injectable(),
    __param(1, core_1.Optional()), __param(1, core_1.Inject(variables_1.ACCOUNTING_BASE_PATH)),
    __metadata("design:paramtypes", [http_1.Http, String])
], AccountTransLineItemApi);
exports.AccountTransLineItemApi = AccountTransLineItemApi;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWNjb3VudFRyYW5zTGluZUl0ZW1BcGkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJBY2NvdW50VHJhbnNMaW5lSXRlbUFwaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBcUJHO0FBRUgsc0NBQ3VDO0FBQ3ZDLHNDQUE4RDtBQUc5RCwwQ0FBNEY7QUFDNUYsbUJBQWlCO0FBRWpCLHVEQUF1RDtBQUl2RCxJQUFhLHVCQUF1QjtJQUloQyxpQ0FBc0IsSUFBVSxFQUEyQyxRQUFnQjtRQUFyRSxTQUFJLEdBQUosSUFBSSxDQUFNO1FBSHRCLGFBQVEsR0FBRyxtRUFBbUUsQ0FBQztRQUNsRixtQkFBYyxHQUFZLElBQUksY0FBTyxFQUFFLENBQUM7UUFHM0MsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUNYLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1FBQzdCLENBQUM7SUFDTCxDQUFDO0lBRUQ7Ozs7Ozs7Ozs7OztPQVlHO0lBQ0ksMkVBQXlDLEdBQWhELFVBQWtELGFBQXNCLEVBQ3RFLHNCQUErQixFQUMvQixPQUFnQixFQUNoQixTQUFrQixFQUNsQixPQUFnQixFQUNoQixRQUFpQixFQUNqQixTQUFrQixFQUNsQixRQUFpQixFQUNqQixrQkFBMkIsRUFDM0Isc0JBQTRCO1FBQzFCLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxRQUFRLEdBQUcsOENBQThDLENBQUM7UUFFNUUsSUFBSSxlQUFlLEdBQUcsSUFBSSxzQkFBZSxFQUFFLENBQUM7UUFDNUMsSUFBSSxZQUFZLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQztRQUN2QyxFQUFFLENBQUMsQ0FBQyxhQUFhLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztZQUM5QixlQUFlLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztRQUNoRSxDQUFDO1FBRUQsRUFBRSxDQUFD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IjpbIi8qKlxuICogR3VhblBsdXMuQWNjb3VudGluZy5XZWJBcGlcbiAqXG4gKiBPcGVuQVBJIHNwZWMgdmVyc2lvbjogdjFcbiAqIFxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgdGhlIHN3YWdnZXIgY29kZSBnZW5lcmF0b3IgcHJvZ3JhbS5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9zd2FnZ2VyLWFwaS9zd2FnZ2VyLWNvZGVnZW4uZ2l0XG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgSHR0cCwgSGVhZGVycywgUmVxdWVzdE9wdGlvbnNBcmdzLCBSZXNwb25zZSwgVVJMU2VhcmNoUGFyYW1zLFxuICBSZXF1ZXN0TWV0aG9kIH0gZnJvbSAnQGFuZ3VsYXIvaHR0cCc7XG5pbXBvcnQgeyBJbmplY3RhYmxlLCBJbmplY3QsIE9wdGlvbmFsIH0gIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMvT2JzZXJ2YWJsZSc7XG5pbXBvcnQgKiBhcyBtb2RlbHMgZnJvbSAnLi4vbW9kZWwvbW9kZWxzJztcbmltcG9ydCB7IEFDQ09VTlRJTkdfQkFTRV9QQVRIIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL3ZhcmlhYmxlcyc7XG5pbXBvcnQgJ3J4anMvUngnO1xuXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgbWVtYmVyLW9yZGVyaW5nICovXG5cblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIEFjY291bnRUcmFuc0xpbmVJdGVtQXBpIHtcbiAgICBwcm90ZWN0ZWQgYmFzZVBhdGggPSAnaHR0cDovL2d1YW5wbHVzLWFwaS1hY2NvdW50aW5nLWRldi5jbi1ub3J0aC0xLmViLmFtYXpvbmF3cy5jb20uY24nO1xuICAgIHB1YmxpYyBkZWZhdWx0SGVhZGVyczogSGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cDogSHR0cCwgQE9wdGlvbmFsKClASW5qZWN0KEFDQ09VTlRJTkdfQkFTRV9QQVRIKSBiYXNlUGF0aDogc3RyaW5nKSB7XG4gICAgICAgIGlmIChiYXNlUGF0aCkge1xuICAgICAgICAgICAgdGhpcy5iYXNlUGF0aCA9IGJhc2VQYXRoO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogXG4gICAgICogQHBhcmFtIGJhbmthY2NvdW50aWQgXG4gICAgICogQHBhcmFtIGFjY291bnRUcmFuc2FjdGlvblR5cGUgXG4gICAgICogQHBhcmFtIGtleXdvcmQgXG4gICAgICogQHBhcmFtIHN0YXJ0RGF0ZSBcbiAgICAgKiBAcGFyYW0gZW5kRGF0ZSBcbiAgICAgKiBAcGFyYW0gdGFnaWRJZHMgXG4gICAgICogQHBhcmFtIHBhZ2VJbmRleCBcbiAgICAgKiBAcGFyYW0gcGFnZVNpemUgXG4gICAgICogQHBhcmFtIGNhcnJ5Rm9yd2FyZFN0YXR1cyBcbiAgICAgKi9cbiAgICBwdWJsaWMgYWNjb3VudFRyYW5zTGluZUl0ZW1BY2NvdW50Q29udHJhc3RFeHBvcnQgKGJhbmthY2NvdW50aWQ/OiBzdHJpbmcsXG4gICAgICBhY2NvdW50VHJhbnNhY3Rpb25UeXBlPzogc3RyaW5nLFxuICAgICAga2V5d29yZD86IHN0cmluZyxcbiAgICAgIHN0YXJ0RGF0ZT86IHN0cmluZyxcbiAgICAgIGVuZERhdGU/OiBzdHJpbmcsXG4gICAgICB0YWdpZElkcz86IHN0cmluZyxcbiAgICAgIHBhZ2VJbmRleD86IHN0cmluZyxcbiAgICAgIHBhZ2VTaXplPzogc3RyaW5nLFxuICAgICAgY2FycnlGb3J3YXJkU3RhdHVzPzogc3RyaW5nLFxuICAgICAgZXh0cmFIdHRwUmVxdWVzdFBhcmFtcz86IGFueSApOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5iYXNlUGF0aCArICcvYXBpL3YxL2FjY291bnRfdHJhbnNhY3Rpb25fbGluZV9pdGVtL2V4cG9ydCc7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgICAgbGV0IGhlYWRlclBhcmFtcyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChiYW5rYWNjb3VudGlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2JhbmthY2NvdW50aWQnLCBTdHJpbmcoYmFua2FjY291bnRpZCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFjY291bnRUcmFuc2FjdGlvblR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldCgnYWNjb3VudFRyYW5zYWN0aW9uVHlwZScsIFN0cmluZyhhY2NvdW50VHJhbnNhY3Rpb25UeXBlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoa2V5d29yZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMuc2V0KCdrZXl3b3JkJywgU3RyaW5nKGtleXdvcmQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdGFydERhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldCgnc3RhcnREYXRlJywgU3RyaW5nKHN0YXJ0RGF0ZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVuZERhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldCgnZW5kRGF0ZScsIFN0cmluZyhlbmREYXRlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGFnaWRJZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldCgndGFnaWRJZHMnLCBTdHJpbmcodGFnaWRJZHMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYWdlSW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldCgncGFnZUluZGV4JywgU3RyaW5nKHBhZ2VJbmRleCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhZ2VTaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3BhZ2VTaXplJywgU3RyaW5nKHBhZ2VTaXplKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2FycnlGb3J3YXJkU3RhdHVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NhcnJ5Rm9yd2FyZFN0YXR1cycsIFN0cmluZyhjYXJyeUZvcndhcmRTdGF0dXMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXF1ZXN0T3B0aW9uczogUmVxdWVzdE9wdGlvbnNBcmdzID0ge1xuICAgICAgICAgICAgbWV0aG9kOiBSZXF1ZXN0TWV0aG9kLkdldCxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtcyxcbiAgICAgICAgICAgIHNlYXJjaDogcXVlcnlQYXJhbWV0ZXJzXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5yZXF1ZXN0KHBhdGgsIHJlcXVlc3RPcHRpb25zKVxuICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjA0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDmoLnmja5pZCDliKDpmaTkuqTmmJPmmI7nu4borrDlvZVcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gYWNjb3VudFRyYW5zSWQgXG4gICAgICogQHBhcmFtIGlkIFxuICAgICAqL1xuICAgIHB1YmxpYyBhY2NvdW50VHJhbnNMaW5lSXRlbURlbGV0ZSAoYWNjb3VudFRyYW5zSWQ6IHN0cmluZyxcbiAgICAgIGlkOiBudW1iZXIsXG4gICAgICBleHRyYUh0dHBSZXF1ZXN0UGFyYW1zPzogYW55ICk6IE9ic2VydmFibGU8T2JqZWN0PiB7XG4gICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLmJhc2VQYXRoICsgJy9hcGkvdjEvYWNjb3VudF90cmFuc2FjdGlvbl9saW5lX2l0ZW0vJHthY2NvdW50VHJhbnNJZH0vJHtpZH0nXG4gICAgICAgICAgICAucmVwbGFjZSgnJHsnICsgJ2FjY291bnRUcmFuc0lkJyArICd9JywgU3RyaW5nKGFjY291bnRUcmFuc0lkKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCckeycgKyAnaWQnICsgJ30nLCBTdHJpbmcoaWQpKTtcblxuICAgICAgICBsZXQgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgICAgICBsZXQgaGVhZGVyUGFyYW1zID0gdGhpcy5kZWZhdWx0SGVhZGVycztcbiAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnYWNjb3VudFRyYW5zSWQnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICBpZiAoYWNjb3VudFRyYW5zSWQgPT09IG51bGwgfHwgYWNjb3VudFRyYW5zSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgYWNjb3VudFRyYW5zSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkJyArXG4gICAgICAgICAgICAgICd3aGVuIGNhbGxpbmcgYWNjb3VudFRyYW5zTGluZUl0ZW1EZWxldGUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnaWQnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICBpZiAoaWQgPT09IG51bGwgfHwgaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlZCBwYXJhbWV0ZXIgaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkJyArXG4gICAgICAgICAgICAgICd3aGVuIGNhbGxpbmcgYWNjb3VudFRyYW5zTGluZUl0ZW1EZWxldGUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJlcXVlc3RPcHRpb25zOiBSZXF1ZXN0T3B0aW9uc0FyZ3MgPSB7XG4gICAgICAgICAgICBtZXRob2Q6IFJlcXVlc3RNZXRob2QuRGVsZXRlLFxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1zLFxuICAgICAgICAgICAgc2VhcmNoOiBxdWVyeVBhcmFtZXRlcnNcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMpXG4gICAgICAgICAgICAubWFwKChyZXNwb25zZTogUmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWIhumhteiOt+WPluS6pOaYk+iusOW9lVxuICAgICAqIFxuICAgICAqIEBwYXJhbSBiYW5rYWNjb3VudGlkIOmTtuihjOi0puaIt0lkXG4gICAgICogQHBhcmFtIGFjY291bnRUcmFuc2FjdGlvblR5cGUg5Lqk5piT57G75Z6L77yaMOOAgeWFqOmDqO+8mzHjgIHmlLblhaXvvJsy44CB5pSv5Ye6XG4gICAgICogQHBhcmFtIGtleXdvcmQg5YWz6ZSu5a2XXG4gICAgICogQHBhcmFtIHN0YXJ0RGF0ZSDlvIDlp4vml7bpl7RcbiAgICAgKiBAcGFyYW0gZW5kRGF0ZSDnu5PmnZ/ml7bpl7RcbiAgICAgKiBAcGFyYW0gdGFnSWRzIFxuICAgICAqIEBwYXJhbSBwYWdlSW5kZXgg6aG15pWw57Si5byVXG4gICAgICogQHBhcmFtIHBhZ2VTaXplIOmhteaVsOWkp+Wwj1xuICAgICAqIEBwYXJhbSBjYXJyeUZvcndhcmRTdGF0dXMg57uT6L2s54q25oCB77yaMOOAgeWFqOmDqOaIluiAheepuu+8mzHjgIHmnKrnu5PovazvvJsy44CB5bey57uT6L2sXG4gICAgICovXG4gICAgcHVibGljIGFjY291bnRUcmFuc0xpbmVJdGVtU2VhcmNoIChiYW5rYWNjb3VudGlkPzogc3RyaW5nLFxuICAgICAgYWNjb3VudFRyYW5zYWN0aW9uVHlwZT86IHN0cmluZyxcbiAgICAgIGtleXdvcmQ/OiBzdHJpbmcsXG4gICAgICBzdGFydERhdGU/OiBzdHJpbmcsXG4gICAgICBlbmREYXRlPzogc3RyaW5nLFxuICAgICAgdGFnSWRzPzogc3RyaW5nLFxuICAgICAgcGFnZUluZGV4Pzogc3RyaW5nLFxuICAgICAgcGFnZVNpemU/OiBzdHJpbmcsXG4gICAgICBjYXJyeUZvcndhcmRTdGF0dXM/OiBzdHJpbmcsXG4gICAgICBleHRyYUh0dHBSZXF1ZXN0UGFyYW1zPzogYW55ICk6IE9ic2VydmFibGU8bW9kZWxzLlBhZ2VkUmVzdWx0QWNjb3VudFRyYW5zTGluZUl0ZW1Nb2RlbD4ge1xuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5iYXNlUGF0aCArICcvYXBpL3YxL2FjY291bnRfdHJhbnNhY3Rpb25fbGluZV9pdGVtL3NlYXJjaCc7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgICAgbGV0IGhlYWRlclBhcmFtcyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChiYW5rYWNjb3VudGlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2JhbmthY2NvdW50aWQnLCBTdHJpbmcoYmFua2FjY291bnRpZCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFjY291bnRUcmFuc2FjdGlvblR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldCgnYWNjb3VudFRyYW5zYWN0aW9uVHlwZScsIFN0cmluZyhhY2NvdW50VHJhbnNhY3Rpb25UeXBlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoa2V5d29yZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMuc2V0KCdrZXl3b3JkJywgU3RyaW5nKGtleXdvcmQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdGFydERhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldCgnc3RhcnREYXRlJywgU3RyaW5nKHN0YXJ0RGF0ZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVuZERhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldCgnZW5kRGF0ZScsIFN0cmluZyhlbmREYXRlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGFnSWRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3RhZ0lkcycsIFN0cmluZyh0YWdJZHMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYWdlSW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldCgncGFnZUluZGV4JywgU3RyaW5nKHBhZ2VJbmRleCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhZ2VTaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ3BhZ2VTaXplJywgU3RyaW5nKHBhZ2VTaXplKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2FycnlGb3J3YXJkU3RhdHVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ2NhcnJ5Rm9yd2FyZFN0YXR1cycsIFN0cmluZyhjYXJyeUZvcndhcmRTdGF0dXMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXF1ZXN0T3B0aW9uczogUmVxdWVzdE9wdGlvbnNBcmdzID0ge1xuICAgICAgICAgICAgbWV0aG9kOiBSZXF1ZXN0TWV0aG9kLkdldCxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtcyxcbiAgICAgICAgICAgIHNlYXJjaDogcXVlcnlQYXJhbWV0ZXJzXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5yZXF1ZXN0KHBhdGgsIHJlcXVlc3RPcHRpb25zKVxuICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjA0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbn1cbiJdfQ==