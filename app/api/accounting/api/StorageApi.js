/**
 * GuanPlus.Accounting.WebApi
 *
 * OpenAPI spec version: v1
 *
 *
 * NOTE: This class is auto generated by the swagger code generator program.
 * https://github.com/swagger-api/swagger-codegen.git
 * Do not edit the class manually.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var http_1 = require("@angular/http");
var core_1 = require("@angular/core");
var variables_1 = require("../variables");
require("rxjs/Rx");
/* tslint:disable:no-unused-variable member-ordering */
var StorageApi = (function () {
    function StorageApi(http, basePath) {
        this.http = http;
        this.basePath = 'http://guanplus-api-accounting-dev.cn-north-1.eb.amazonaws.com.cn';
        this.defaultHeaders = new http_1.Headers();
        if (basePath) {
            this.basePath = basePath;
        }
    }
    /**
     * 删除
     *
     * @param id
     */
    StorageApi.prototype.storageDelete = function (id, extraHttpRequestParams) {
        var path = this.basePath + '/api/v1/storage/${Id}'
            .replace('${' + 'Id' + '}', String(id));
        var queryParameters = new http_1.URLSearchParams();
        var headerParams = this.defaultHeaders;
        // verify required parameter 'id' is not null or undefined
        if (id === null || id === undefined) {
            throw new Error('Required parameter id was null or undefined' +
                'when calling storageDelete.');
        }
        var requestOptions = {
            method: http_1.RequestMethod.Delete,
            headers: headerParams,
            search: queryParameters
        };
        return this.http.request(path, requestOptions)
            .map(function (response) {
            if (response.status === 204) {
                return undefined;
            }
            else {
                return response.json();
            }
        });
    };
    /**
     * 下载
     *
     * @param attachmentId
     */
    StorageApi.prototype.storageGet = function (attachmentId, extraHttpRequestParams) {
        var path = this.basePath + '/api/Storage';
        var queryParameters = new http_1.URLSearchParams();
        var headerParams = this.defaultHeaders;
        // verify required parameter 'attachmentId' is not null or undefined
        if (attachmentId === null || attachmentId === undefined) {
            throw new Error('Required parameter attachmentId was null or undefined' +
                'when calling storageGet.');
        }
        if (attachmentId !== undefined) {
            queryParameters.set('AttachmentId', String(attachmentId));
        }
        var requestOptions = {
            method: http_1.RequestMethod.Get,
            headers: headerParams,
            search: queryParameters
        };
        return this.http.request(path, requestOptions)
            .map(function (response) {
            if (response.status === 204) {
                return undefined;
            }
            else {
                return response.json();
            }
        });
    };
    /**
     * 上传
     *
     */
    StorageApi.prototype.storagePost = function (extraHttpRequestParams) {
        var path = this.basePath + '/api/v1/storage/upload';
        var queryParameters = new http_1.URLSearchParams();
        var headerParams = this.defaultHeaders;
        var requestOptions = {
            method: http_1.RequestMethod.Post,
            headers: headerParams,
            search: queryParameters
        };
        return this.http.request(path, requestOptions)
            .map(function (response) {
            if (response.status === 204) {
                return undefined;
            }
            else {
                return response.json();
            }
        });
    };
    /**
     * 列出bucket中一个文件夹中的 items
     *
     * @param modelId attachment Id
     * @param modelCompanyId companyId
     * @param modelUserId User Id
     * @param modelPath 上传文件的路径
     * @param modelFileName 上传文件的名称
     * @param modelUrl 下载item 的url
     * @param modelAttachmentType 附件类型
     * @param modelOriginName 名称
     * @param modelEntityTypeCode 实体类型
     */
    StorageApi.prototype.storageSearch = function (modelId, modelCompanyId, modelUserId, modelPath, modelFileName, modelUrl, modelAttachmentType, modelOriginName, modelEntityTypeCode, extraHttpRequestParams) {
        var path = this.basePath + '/api/v1/storage/search';
        var queryParameters = new http_1.URLSearchParams();
        var headerParams = this.defaultHeaders;
        if (modelId !== undefined) {
            queryParameters.set('model.id', String(modelId));
        }
        if (modelCompanyId !== undefined) {
            queryParameters.set('model.companyId', String(modelCompanyId));
        }
        if (modelUserId !== undefined) {
            queryParameters.set('model.userId', String(modelUserId));
        }
        if (modelPath !== undefined) {
            queryParameters.set('model.path', String(modelPath));
        }
        if (modelFileName !== undefined) {
            queryParameters.set('model.fileName', String(modelFileName));
        }
        if (modelUrl !== undefined) {
            queryParameters.set('model.url', String(modelUrl));
        }
        if (modelAttachmentType !== undefined) {
            queryParameters.set('model.attachmentType', String(modelAttachmentType));
        }
        if (modelOriginName !== undefined) {
            queryParameters.set('model.originName', String(modelOriginName));
        }
        if (modelEntityTypeCode !== undefined) {
            queryParameters.set('model.entityTypeCode', String(modelEntityTypeCode));
        }
        var requestOptions = {
            method: http_1.RequestMethod.Get,
            headers: headerParams,
            search: queryParameters
        };
        return this.http.request(path, requestOptions)
            .map(function (response) {
            if (response.status === 204) {
                return undefined;
            }
            else {
                return response.json();
            }
        });
    };
    return StorageApi;
}());
StorageApi = __decorate([
    core_1.Injectable(),
    __param(1, core_1.Optional()), __param(1, core_1.Inject(variables_1.ACCOUNTING_BASE_PATH)),
    __metadata("design:paramtypes", [http_1.Http, String])
], StorageApi);
exports.StorageApi = StorageApi;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3RvcmFnZUFwaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlN0b3JhZ2VBcGkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQXFCRztBQUVILHNDQUN1QztBQUN2QyxzQ0FBOEQ7QUFHOUQsMENBQTRGO0FBQzVGLG1CQUFpQjtBQUVqQix1REFBdUQ7QUFJdkQsSUFBYSxVQUFVO0lBSW5CLG9CQUFzQixJQUFVLEVBQTJDLFFBQWdCO1FBQXJFLFNBQUksR0FBSixJQUFJLENBQU07UUFIdEIsYUFBUSxHQUFHLG1FQUFtRSxDQUFDO1FBQ2xGLG1CQUFjLEdBQVksSUFBSSxjQUFPLEVBQUUsQ0FBQztRQUczQyxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1lBQ1gsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7UUFDN0IsQ0FBQztJQUNMLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksa0NBQWEsR0FBcEIsVUFBc0IsRUFBVSxFQUM5QixzQkFBNEI7UUFDMUIsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRyx1QkFBdUI7YUFDL0MsT0FBTyxDQUFDLElBQUksR0FBRyxJQUFJLEdBQUcsR0FBRyxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBRTVDLElBQUksZUFBZSxHQUFHLElBQUksc0JBQWUsRUFBRSxDQUFDO1FBQzVDLElBQUksWUFBWSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUM7UUFDdkMsMERBQTBEO1FBQzFELEVBQUUsQ0FBQyxDQUFDLEVBQUUsS0FBSyxJQUFJLElBQUksRUFBRSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDbEMsTUFBTSxJQUFJLEtBQUssQ0FBQyw2Q0FBNkM7Z0JBQzNELDZCQUE2QixDQUFDLENBQUM7UUFDckMsQ0FBQztRQUNELElBQUksY0FBYyxHQUF1QjtZQUNyQyxNQUFNLEVBQUUsb0JBQWEsQ0FBQyxNQUFNO1lB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LENBQUM7WUFDM0IsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ1gsQ0FBQztJQUVMLGlCQUFDO0FBQUQsQ0FBQyxBQXZMRCxJQXVMQztBQXZMWSxVQUFVO0lBRHRCLGlCQUFVLEVBQUU7SUFLMEIsV0FBQSxlQUFRLEVBQUUsQ0FBQSxFQUFDLFdBQUEsYUFBTSxDQUFDLGdDQUFvQixDQUFDLENBQUE7cUNBQTlDLFdBQUk7R0FKdkIsVUFBVSxDQXVMdEI7QUF2TFksZ0NBQVUiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEd1YW5QbHVzLkFjY291bnRpbmcuV2ViQXBpXG4gKlxuICogT3BlbkFQSSBzcGVjIHZlcnNpb246IHYxXG4gKiBcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IHRoZSBzd2FnZ2VyIGNvZGUgZ2VuZXJhdG9yIHByb2dyYW0uXG4gKiBodHRwczovL2dpdGh1Yi5jb20vc3dhZ2dlci1hcGkvc3dhZ2dlci1jb2RlZ2VuLmdpdFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEh0dHAsIEhlYWRlcnMsIFJlcXVlc3RPcHRpb25zQXJncywgUmVzcG9uc2UsIFVSTFNlYXJjaFBhcmFtcyxcbiAgUmVxdWVzdE1ldGhvZCB9IGZyb20gJ0Bhbmd1bGFyL2h0dHAnO1xuaW1wb3J0IHsgSW5qZWN0YWJsZSwgSW5qZWN0LCBPcHRpb25hbCB9ICBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzL09ic2VydmFibGUnO1xuaW1wb3J0ICogYXMgbW9kZWxzIGZyb20gJy4uL21vZGVsL21vZGVscyc7XG5pbXBvcnQgeyBBQ0NPVU5USU5HX0JBU0VfUEFUSCB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi92YXJpYWJsZXMnO1xuaW1wb3J0ICdyeGpzL1J4JztcblxuLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlIG1lbWJlci1vcmRlcmluZyAqL1xuXG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBTdG9yYWdlQXBpIHtcbiAgICBwcm90ZWN0ZWQgYmFzZVBhdGggPSAnaHR0cDovL2d1YW5wbHVzLWFwaS1hY2NvdW50aW5nLWRldi5jbi1ub3J0aC0xLmViLmFtYXpvbmF3cy5jb20uY24nO1xuICAgIHB1YmxpYyBkZWZhdWx0SGVhZGVyczogSGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaHR0cDogSHR0cCwgQE9wdGlvbmFsKClASW5qZWN0KEFDQ09VTlRJTkdfQkFTRV9QQVRIKSBiYXNlUGF0aDogc3RyaW5nKSB7XG4gICAgICAgIGlmIChiYXNlUGF0aCkge1xuICAgICAgICAgICAgdGhpcy5iYXNlUGF0aCA9IGJhc2VQYXRoO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5Yig6ZmkXG4gICAgICogXG4gICAgICogQHBhcmFtIGlkIFxuICAgICAqL1xuICAgIHB1YmxpYyBzdG9yYWdlRGVsZXRlIChpZDogc3RyaW5nLFxuICAgICAgZXh0cmFIdHRwUmVxdWVzdFBhcmFtcz86IGFueSApOiBPYnNlcnZhYmxlPG1vZGVscy5Cb29sUmVzdWx0TW9kZWw+IHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMuYmFzZVBhdGggKyAnL2FwaS92MS9zdG9yYWdlLyR7SWR9J1xuICAgICAgICAgICAgLnJlcGxhY2UoJyR7JyArICdJZCcgKyAnfScsIFN0cmluZyhpZCkpO1xuXG4gICAgICAgIGxldCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgICAgIGxldCBoZWFkZXJQYXJhbXMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzO1xuICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdpZCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgIGlmIChpZCA9PT0gbnVsbCB8fCBpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIHBhcmFtZXRlciBpZCB3YXMgbnVsbCBvciB1bmRlZmluZWQnICtcbiAgICAgICAgICAgICAgJ3doZW4gY2FsbGluZyBzdG9yYWdlRGVsZXRlLicpO1xuICAgICAgICB9XG4gICAgICAgIGxldCByZXF1ZXN0T3B0aW9uczogUmVxdWVzdE9wdGlvbnNBcmdzID0ge1xuICAgICAgICAgICAgbWV0aG9kOiBSZXF1ZXN0TWV0aG9kLkRlbGV0ZSxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtcyxcbiAgICAgICAgICAgIHNlYXJjaDogcXVlcnlQYXJhbWV0ZXJzXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5yZXF1ZXN0KHBhdGgsIHJlcXVlc3RPcHRpb25zKVxuICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjA0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDkuIvovb1cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gYXR0YWNobWVudElkIFxuICAgICAqL1xuICAgIHB1YmxpYyBzdG9yYWdlR2V0IChhdHRhY2htZW50SWQ6IHN0cmluZyxcbiAgICAgIGV4dHJhSHR0cFJlcXVlc3RQYXJhbXM/OiBhbnkgKTogT2JzZXJ2YWJsZTxtb2RlbHMuQm9vbFJlc3VsdE1vZGVsPiB7XG4gICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLmJhc2VQYXRoICsgJy9hcGkvU3RvcmFnZSc7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgICAgbGV0IGhlYWRlclBhcmFtcyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2F0dGFjaG1lbnRJZCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgIGlmIChhdHRhY2htZW50SWQgPT09IG51bGwgfHwgYXR0YWNobWVudElkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcGFyYW1ldGVyIGF0dGFjaG1lbnRJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQnICtcbiAgICAgICAgICAgICAgJ3doZW4gY2FsbGluZyBzdG9yYWdlR2V0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRhY2htZW50SWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldCgnQXR0YWNobWVudElkJywgU3RyaW5nKGF0dGFjaG1lbnRJZCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlcXVlc3RPcHRpb25zOiBSZXF1ZXN0T3B0aW9uc0FyZ3MgPSB7XG4gICAgICAgICAgICBtZXRob2Q6IFJlcXVlc3RNZXRob2QuR2V0LFxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1zLFxuICAgICAgICAgICAgc2VhcmNoOiBxdWVyeVBhcmFtZXRlcnNcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMpXG4gICAgICAgICAgICAubWFwKChyZXNwb25zZTogUmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOS4iuS8oFxuICAgICAqIFxuICAgICAqL1xuICAgIHB1YmxpYyBzdG9yYWdlUG9zdCAoZXh0cmFIdHRwUmVxdWVzdFBhcmFtcz86IGFueSApOiBPYnNlcnZhYmxlPG1vZGVscy5BdHRhY2htZW50TW9kZWw+IHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMuYmFzZVBhdGggKyAnL2FwaS92MS9zdG9yYWdlL3VwbG9hZCc7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgICAgbGV0IGhlYWRlclBhcmFtcyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGxldCByZXF1ZXN0T3B0aW9uczogUmVxdWVzdE9wdGlvbnNBcmdzID0ge1xuICAgICAgICAgICAgbWV0aG9kOiBSZXF1ZXN0TWV0aG9kLlBvc3QsXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbXMsXG4gICAgICAgICAgICBzZWFyY2g6IHF1ZXJ5UGFyYW1ldGVyc1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucmVxdWVzdChwYXRoLCByZXF1ZXN0T3B0aW9ucylcbiAgICAgICAgICAgIC5tYXAoKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwNCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5YiX5Ye6YnVja2V05Lit5LiA5Liq5paH5Lu25aS55Lit55qEIGl0ZW1zXG4gICAgICogXG4gICAgICogQHBhcmFtIG1vZGVsSWQgYXR0YWNobWVudCBJZFxuICAgICAqIEBwYXJhbSBtb2RlbENvbXBhbnlJZCBjb21wYW55SWRcbiAgICAgKiBAcGFyYW0gbW9kZWxVc2VySWQgVXNlciBJZFxuICAgICAqIEBwYXJhbSBtb2RlbFBhdGgg5LiK5Lyg5paH5Lu255qE6Lev5b6EXG4gICAgICogQHBhcmFtIG1vZGVsRmlsZU5hbWUg5LiK5Lyg5paH5Lu255qE5ZCN56ewXG4gICAgICogQHBhcmFtIG1vZGVsVXJsIOS4i+i9vWl0ZW0g55qEdXJsXG4gICAgICogQHBhcmFtIG1vZGVsQXR0YWNobWVudFR5cGUg6ZmE5Lu257G75Z6LXG4gICAgICogQHBhcmFtIG1vZGVsT3JpZ2luTmFtZSDlkI3np7BcbiAgICAgKiBAcGFyYW0gbW9kZWxFbnRpdHlUeXBlQ29kZSDlrp7kvZPnsbvlnotcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RvcmFnZVNlYXJjaCAobW9kZWxJZD86IHN0cmluZyxcbiAgICAgIG1vZGVsQ29tcGFueUlkPzogc3RyaW5nLFxuICAgICAgbW9kZWxVc2VySWQ/OiBzdHJpbmcsXG4gICAgICBtb2RlbFBhdGg/OiBzdHJpbmcsXG4gICAgICBtb2RlbEZpbGVOYW1lPzogc3RyaW5nLFxuICAgICAgbW9kZWxVcmw/OiBzdHJpbmcsXG4gICAgICBtb2RlbEF0dGFjaG1lbnRUeXBlPzogc3RyaW5nLFxuICAgICAgbW9kZWxPcmlnaW5OYW1lPzogc3RyaW5nLFxuICAgICAgbW9kZWxFbnRpdHlUeXBlQ29kZT86IHN0cmluZyxcbiAgICAgIGV4dHJhSHR0cFJlcXVlc3RQYXJhbXM/OiBhbnkgKTogT2JzZXJ2YWJsZTxPYmplY3Q+IHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMuYmFzZVBhdGggKyAnL2FwaS92MS9zdG9yYWdlL3NlYXJjaCc7XG5cbiAgICAgICAgbGV0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgICAgbGV0IGhlYWRlclBhcmFtcyA9IHRoaXMuZGVmYXVsdEhlYWRlcnM7XG4gICAgICAgIGlmIChtb2RlbElkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ21vZGVsLmlkJywgU3RyaW5nKG1vZGVsSWQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtb2RlbENvbXBhbnlJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMuc2V0KCdtb2RlbC5jb21wYW55SWQnLCBTdHJpbmcobW9kZWxDb21wYW55SWQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtb2RlbFVzZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMuc2V0KCdtb2RlbC51c2VySWQnLCBTdHJpbmcobW9kZWxVc2VySWQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtb2RlbFBhdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldCgnbW9kZWwucGF0aCcsIFN0cmluZyhtb2RlbFBhdGgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtb2RlbEZpbGVOYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ21vZGVsLmZpbGVOYW1lJywgU3RyaW5nKG1vZGVsRmlsZU5hbWUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtb2RlbFVybCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMuc2V0KCdtb2RlbC51cmwnLCBTdHJpbmcobW9kZWxVcmwpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtb2RlbEF0dGFjaG1lbnRUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ21vZGVsLmF0dGFjaG1lbnRUeXBlJywgU3RyaW5nKG1vZGVsQXR0YWNobWVudFR5cGUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtb2RlbE9yaWdpbk5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldCgnbW9kZWwub3JpZ2luTmFtZScsIFN0cmluZyhtb2RlbE9yaWdpbk5hbWUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtb2RlbEVudGl0eVR5cGVDb2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoJ21vZGVsLmVudGl0eVR5cGVDb2RlJywgU3RyaW5nKG1vZGVsRW50aXR5VHlwZUNvZGUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXF1ZXN0T3B0aW9uczogUmVxdWVzdE9wdGlvbnNBcmdzID0ge1xuICAgICAgICAgICAgbWV0aG9kOiBSZXF1ZXN0TWV0aG9kLkdldCxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtcyxcbiAgICAgICAgICAgIHNlYXJjaDogcXVlcnlQYXJhbWV0ZXJzXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5yZXF1ZXN0KHBhdGgsIHJlcXVlc3RPcHRpb25zKVxuICAgICAgICAgICAgLm1hcCgocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjA0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbn1cbiJdfQ==